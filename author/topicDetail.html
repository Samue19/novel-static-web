<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>topicDetail</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/topicDetail.css">
    <link rel="stylesheet" href="https://lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <!-- header -->
    <header>
        <div class="flex-between">
            <!-- left -->
            <div class="left flex-center">
                <!-- logo -->
                <div class="logo">
                    <a href="./index.html">
                        <img src="‪" alt="">
                        <span>作家专区</span>
                    </a>
                </div>
                <!-- nav -->
                <ul class="flex-center">
                    <li>
                        <a href="./index.html">首页</a>
                    </li>
                    <li>
                        <a href="./article.html">文章</a>
                    </li>
                    <li>
                        <a href="./spcolumn.html">专栏</a>
                    </li>
                    <li>
                        <a href="./viewpoint.html">话题</a>
                    </li>
                </ul>
            </div>
            <!-- right -->
            <div class="right">
                <!-- login -->
                <div class="login flex-between" style="display:none">
                    <!-- working -->
                    <div class="working" index='0'>
                        <a href="./dashboard.html">
                            <i class="fa fa-desktop"></i>
                        </a>
                        <div>123</div>
                    </div>
                    <!-- tips -->
                    <div class="tips" index='1'>
                        <a href="">
                            <i class="fa fa-bell-o"></i>
                        </a>
                        <div>123</div>
                    </div>
                    <!-- user -->
                    <div class="user" index='2'>
                        <a href="./personPage.html">
                            <i class="fa fa-user-circle"></i>
                        </a>
                        <div >
                            <!-- level-info -->
                            <div class="level-info">
                                <h3>
                                    <a href="./personPage.html">
                                        原创作家<span>普通</span>
                                    </a>
                                </h3>
                            </div>
                            <!-- menu-list -->
                            <div class="menu-list">
                                <dl>
                                    <dd>
                                        <a href="">作品管理</a>
                                    </dd>
                                    <dd>
                                        <a href="">立即写作</a>
                                    </dd>
                                </dl>
                                <dl>
                                    <dd>
                                        <a href="">我收藏的文章</a>
                                    </dd>
                                    <dd>
                                        <a href="">我关注的专栏</a>
                                    </dd>
                                </dl>
                                <dl>
                                    <dd>
                                        <a href="">个人资料</a>
                                    </dd>
                                    <dd>
                                        <a href="">修改密码</a>
                                    </dd>
                                    <dd>
                                        <a href="">退出登录</a>
                                    </dd>
                                </dl>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <!-- no-login -->
                <div class="no-login" style="display: flex">
                    <a href="">登录</a>
                    <a href="">成为作家</a>
                </div>
            </div>
        </div>
    </header>

    <div class="content flex-start">
        <!-- left -->
        <div class="left">
            <div class="topicDetail box-shadow-sm">
                <!-- breadcrumbs -->
                <div class="breadcrumbs">
                    <span>话题 / </span>
                    <span>话题详情页</span>
                </div>
                <!-- topic-detail -->
                <div class="topic-detail">
                    <div class="tic-author">
                        <img src="https://ccstatic-1252317822.file.myqcloud.com/portraitimg/2020-12-16/591c5d68b7173de0112af75aee0c0e3058CpZ71nWGO52IP.jpg" alt="">
                        <span>青草小说发起</span>
                    </div>
                    <h2>有哪些写作问题，想学想问我们？</h2>
                    <div class="info">1.5万 阅读 · 1513 观点</div>
                    <p>
                        20年末，阅文起点创作学堂精选作者提问，邀请编辑解答，制作了编辑直通车课程，受到了广泛好评。今年我们课程升级，特邀神秘嘉宾助阵，答疑解惑！
                        欢迎大家踊跃提问，我们将在高赞提问中选取合适的关于写作内容类的问题进行解答（小技巧，问题描述越详细，问题内容越深入，越可能被选中） 
                    </p>
                    <div class="tool">
                        <button>写观点</button>
                        <button>关注话题</button>
                    </div>
                    <div class="inputs" style="display: none;">
                        <div class="text">
                            <textarea name="" id="" cols="30" rows="10" placeholder="说出你的观点"></textarea>
                        </div>
                        <div>
                            <i class="fa fa-photo"></i>
                            <div class="in-info">
                                <span>0</span>
                                /500
                                <button>发表</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- nav -->
                <ul class="nav">
                    <li>
                        <a href="">最热</a>
                    </li>
                    <li>
                        <a href="">最新</a>
                    </li>
                </ul>
                <!-- view-list -->
                <div class="view-list">
                    <ul>
                        <li>
                            <!-- view-item -->
                            <div class="view-item">
                                <a href="">
                                    <img src="https://ccstatic-1252317822.file.myqcloud.com/portraitimg/2021-04-17/607aaa2ce4ffe.jpeg" alt="">
                                </a>
                                <div class="info">
                                    <h4><a href="">简吴</a></h4>
                                    <div>
                                        <p>
                                            那个人是<br/>
                                            wowow
                                            <span class="fold">[全文]</span>
                                        </p>
                                        <img src="https://ccstatic-1252317822.file.myqcloud.com//livemsg/19292724608886401/1621991931368.jpeg" alt="">
                                    </div>
                                    <!-- tools -->
                                    <ul class="info-tools flex-between">
                                        <li>
                                            <a href="javascript:;">
                                                <i class="fa fa-comment-o"></i>
                                                <span></span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="">
                                                <i class="fa fa-share"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="">
                                                <i class="fa fa-thumbs-o-up"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                
                            </div>
                            <!-- com -->
                            <div class="com" style="display: none;">
                                <!-- com-input -->
                                <div class="com-input">
                                    <div>
                                        <img src="https://ccstatic-1252317822.file.myqcloud.com/writer/p1/contentv2/photo_default.png" alt="">
                                        <textarea placeholder="发表评论" name="" id="" cols="30" rows="10"></textarea>
                                    </div>
                                    <div class="flex-between">
                                        <div>
                                            <input type="checkbox">
                                            评论并转发
                                        </div>
                                        <div class="count">
                                            <span>0</span>
                                            /
                                            <span>140</span>
                                            <button>发表</button>
                                        </div>
                                    </div>
                                </div>
                                <!-- com-list -->
                                <div class="com-list">
                                    <p>全部<span>1</span>条评论</p>
                                    <ul>
                                        <li>
                                            <img src="https://ccstatic-1252317822.image.myqcloud.com/writer/p1/contentv2/photo_default.png?imageMogr2/thumbnail/72x72!" alt="">
                                            <div>
                                                <h4>原创作家</h4>
                                                <p>
                                                    回复 
                                                    我想想：
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来就容易沉浸，
                                                    写作本来
                                                    <span class="fold">[全文]</span>
                                                </p>
                                                <!-- tools -->
                                                <div class="tools flex-start">
                                                    <a href="">
                                                        <i class="fa fa-comments-o"></i>
                                                    </a>
                                                    <a href="">
                                                        <i class="fa fa-thumbs-o-up"></i>
                                                    </a>
                                                </div>
                                            </div>
                                            
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
        <!-- right -->
        <div class="right">
            <!-- section -->
            <section>
                <!-- con-section -->
                <div class="con-section box-shadow-sm">
                    <div class="title">
                        <h2>大家正在讨论</h2>
                    </div>
                    <ul>
                        <li>
                            <a href="">
                                <div>
                                    <i class="fa fa-commenting"></i>
                                </div>
                                <div>
                                    <p>如何给青春校园类小说起书名？</p>
                                    <p>12.9万 阅读 · 4424 观点</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="">
                                <div>
                                    <i class="fa fa-commenting"></i>
                                </div>
                                <div>
                                    <p>如何给青春校园类小说起书名？</p>
                                    <p>12.9万 阅读 · 4424 观点</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="">
                                <div>
                                    <i class="fa fa-commenting"></i>
                                </div>
                                <div>
                                    <p>如何给青春校园类小说起书名？</p>
                                    <p>12.9万 阅读 · 4424 观点</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="">
                                <div>
                                    <i class="fa fa-commenting"></i>
                                </div>
                                <div>
                                    <p>如何给青春校园类小说起书名？</p>
                                    <p>12.9万 阅读 · 4424 观点</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="">
                                <div>
                                    <i class="fa fa-commenting"></i>
                                </div>
                                <div>
                                    <p>如何给青春校园类小说起书名？</p>
                                    <p>12.9万 阅读 · 4424 观点</p>
                                </div>
                            </a>
                        </li>
                    </ul>
                    
                </div>
            </section>
        </div>
        
    </div>
    <!-- footer -->
    <footer class="flex-center">
        <div class="flex-center">
            <p>
                作者专区
            </p>
        </div>
    </footer>
    <script src="./js/main.js"></script>
    <script>
        //计算row
        function row(){
            folds.forEach(el => {
                console.log(el.parentElement.clientHeight)
                let row = Math.ceil(el.parentElement.clientHeight / 24);
                console.log(row)
                if (row > 3) {
                    el.parentNode.style.display = "-webkit-box";
                    el.style.display='block';
                } else {
                    el.style.display = 'none';
                    el.parentNode.style.display = 'block';
                }
            });
        }
        let folds = document.querySelectorAll('.fold');
        //收起，隐藏全文
        function fold(){
            folds.forEach((el, i) => {
                el.addEventListener('click', (e) => {
                    if (el.innerHTML == '[全文]') {
                        el.innerHTML = '[收起全文]';
                        el.classList.add('active')
                        el.parentNode.style.display = 'block';
                    } else if (el.innerHTML == '[收起全文]') {
                        el.innerHTML = '[全文]';
                        el.classList.remove('active');
                        el.parentNode.style.display = "-webkit-box";
                    }
                })
                
            })
        }
        fold();
        row();
        var toolBtn=document.querySelector('.topicDetail .topic-detail .tool>button:nth-of-type(1)');
        var inputs=document.querySelector('.topicDetail .topic-detail .inputs');
        var viewA=document.querySelectorAll('.view-list ul li .view-item .info .info-tools li:nth-of-type(1) a');
        var viewCom=document.querySelectorAll('.view-list ul li .com');
        console.log(viewA)
        console.log(viewCom)
        //发表观点
        toolBtn.addEventListener('click',e=>{
            changeShow(inputs);
        })
        //展示评论列表
        viewA.forEach((el,key)=>{
            el.addEventListener('click',e=>{
                if(el.children[1].innerHTML==''){
                    el.style.color="blue";
                    el.children[0].style.color='blue';
                    el.children[1].innerHTML="收起评论";
                }else{
                    el.children[0].style.color='';
                    el.children[1].innerHTML='';
                }
                changeShow(viewCom[key]);
                row();
            })
        })
        //切换显示
        function changeShow(el){
            if(el.style.display=="none"){
                el.style.display="block";
            }else{
                el.style.display="none";
            }
        }
    </script>
</body>
</html>